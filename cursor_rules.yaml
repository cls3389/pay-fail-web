# Cursor用户规则配置
# 适用于 Windows 10/11 + Python + Docker 开发环境
# 专门针对Excel数据处理工具项目

# 基础配置
os: win32
shell: powershell
workspace: D:\Cursor\excel数据处理\扣款失败信息处理工具 - 副本

# Python环境配置
python:
  version: "3.8+"
  virtual_env: true
  package_manager: pip
  requirements_file: requirements.txt
  
# 网络代理配置
proxy:
  enabled: true
  host: 127.0.0.1
  port: 7897
  protocol: http

# Docker 配置
docker:
  enabled: true
  base_image: python:3.9-slim
  port: 5000
  volumes:
    - "./uploads:/app/uploads"
    - "./output:/app/output"

# 开发环境变量
env:
  PYTHONPATH: .
  FLASK_ENV: development
  FLASK_DEBUG: true
  UPLOAD_FOLDER: uploads
  OUTPUT_FOLDER: output
  MAX_CONTENT_LENGTH: 16777216  # 16MB

# 项目特定配置
project:
  type: python
  framework: flask
  main_file: app.py
  build_command: pip install -r requirements.txt
  run_command: python app.py
  test_command: python -m pytest tests/

# 依赖包配置
dependencies:
  core:
    - flask
    - pandas
    - openpyxl
    - werkzeug
  development:
    - pytest
    - black
    - flake8
    - python-dotenv

# 代码格式化配置
format:
  python:
    tool: black
    line_length: 88
    on_save: true
    
# Linting配置
lint:
  python:
    tool: flake8
    max_line_length: 88
    ignore: [E203, W503]
    on_save: true

# Web框架配置
web:
  framework: flask
  host: 0.0.0.0
  port: 5000
  debug: true
  upload_extensions: ['.xlsx', '.xls']
  max_file_size: 16MB

# 终端配置
terminal:
  default: powershell
  profiles:
    - name: PowerShell
      path: powershell.exe
    - name: CMD
      path: cmd.exe

# 构建任务
tasks:
  - name: install dependencies
    command: pip install -r requirements.txt
    group: build
  - name: run app
    command: python app.py
    group: run
  - name: run tests
    command: python -m pytest
    group: test
  - name: format code
    command: black .
    group: format
  - name: lint code
    command: flake8 .
    group: lint
  - name: build docker
    command: docker build -t excel-processor .
    group: docker
  - name: run docker
    command: docker run -p 5000:5000 excel-processor
    group: docker

# 文件监视忽略列表
ignore:
  - "**/__pycache__/**"
  - "**/*.pyc"
  - "**/.git/**"
  - "**/node_modules/**"
  - "**/.cursor/**"
  - "**/.vscode/**"
  - "**/uploads/**"
  - "**/output/**"
  - "**/.pytest_cache/**"
  - "**/*.egg-info/**"

# Excel处理配置
excel:
  supported_formats: ['.xlsx', '.xls']
  required_columns: ['应还款金额', '所属直营中心', '所属团队', '所属业务经理', '客户姓名']
  optional_columns: ['客户UID', '贷后BP']
  output_format: '.xlsx'
  
# 部署配置
deployment:
  platform: docker
  registry: docker.io
  image_name: excel-processor
  environment: production
  health_check: /health
